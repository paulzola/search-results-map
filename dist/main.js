!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=35)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={lat:33.747252,lng:-112.633853};t.default=function(e){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){e({lat:t.coords.latitude,lng:t.coords.longitude})}),e(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.save=function(e){var t=e.data,n=e.key,r=JSON.stringify(t);localStorage.setItem(n,r)},t.load=function(e){var t=window.localStorage.getItem(e);return t?JSON.parse(t):{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){for(var n=e;n&&n.parentNode;){var r=t(n);if(r)return{node:n,result:r};n=n.parentNode}return null}},,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(6),n(4);t.default=function(){return'\n    <div class="srm-empty-history">\n        <span class="srm-empty-history__icon srm-list-icon">\n        </span><span class="srm-empty-history__text srm-place-location">\n            Здесь будут найденные местоположения\n        </span>\n    </div>\n    '}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===t)return Math.ceil(e);var n=Math.pow(10,t);return Math.ceil(e*n-1e-13)/n}},,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(12),n(10);var r,i=n(8),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.name,n=e.location;return'\n    <div class="srm-history-card'+(e.active?" srm-history-card_active":"")+'">\n        <div class="srm-place-name srm-history-card__name">'+t+'</div>\n        <div class="srm-place-location srm-history-card__location">\n        '+(0,a.default)(n.lat,2)+" "+(0,a.default)(n.lng,2)+"\n        </div>\n    </div>\n    "}},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(15);var i=s(n(13)),a=s(n(7)),o=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){var n=this,r=t.container,i=t.onCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handleBoxClick=function(e){var t=(0,o.default)(e.target,n._cardNodeCheck);t&&"string"==typeof t.result&&n.onCardClick(t.result)},this._cardNodeCheck=function(e){return e.getAttribute&&e.getAttribute("data-history-id")},this.container=r,this.onCardClick=i,this.emptyMessageShow=!1,this._createBox()}return r(e,[{key:"_createBox",value:function(){var e=document.createElement("div");e.className="srm-history",this.container.appendChild(e),this.box=e,this.box.addEventListener("click",this._handleBoxClick)}},{key:"_clearElement",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},{key:"_getCardBox",value:function(e){var t=document.createElement("div");return t.className="srm-history__item",t.setAttribute("data-history-id",e.id),t.innerHTML=(0,i.default)(e),t}},{key:"_removeEmptyMessage",value:function(){this.emptyMessageShow&&(this._clearElement(this.box),this.emptyMessageShow=!1)}},{key:"_renderEmptyMessage",value:function(){this.box.innerHTML=(0,a.default)(),this.emptyMessageShow=!0}},{key:"_renderCards",value:function(e){var t=this;this._removeEmptyMessage();var n=document.createDocumentFragment();e.forEach(function(e){n.appendChild(t._getCardBox(e))}),this.box.appendChild(n)}},{key:"render",value:function(e){this._clearElement(this.box),e&&e.length?this._renderCards(e):this._renderEmptyMessage()}}]),e}();t.default=c},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(18);var i=function(){function e(t){var n=t.container;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=n,this.marker=null,this._createBox()}return r(e,[{key:"_createBox",value:function(){var e=document.createElement("div");e.className="srm-map",this.container.appendChild(e),this.box=e}},{key:"_createMap",value:function(e){this.map=new window.google.maps.Map(this.box,{center:e,zoom:16})}},{key:"_createMarker",value:function(e){var t=e.name,n=e.location;this.marker=new window.google.maps.Marker({position:n,label:t,map:this.map})}},{key:"setCenter",value:function(e){this.map?this.map.setCenter(e):this._createMap(e)}},{key:"addMarker",value:function(e){var t=e.name,n=e.location;if(this.map||this._createMap(n),null===this.marker)return this._createMarker(e),void this.setCenter(n);this.marker.setLabel(t),this.marker.setPosition(n),this.setCenter(n)}}]),e}();t.default=i},,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(23),n(21);var i=function(){function e(t){var n=this,r=t.container,i=t.onPlaceChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlePlaceChange=function(){var e=n.autocomplete.getPlace(),t=e.geometry.location;n.clear(),n.onPlaceChange({name:e.name,location:{lat:t.lat(),lng:t.lng()}})},this.container=r,this.onPlaceChange=i,this._createBox()}return r(e,[{key:"_createBox",value:function(){var e=document.createElement("div");e.className="srm-search-box";var t=document.createElement("input");t.className="srm-input srm-search-box__input",this.input=t,e.appendChild(t),this.container.appendChild(e),this.autocomplete=new window.google.maps.places.Autocomplete(t),this.autocomplete.addListener("place_changed",this._handlePlaceChange)}},{key:"clear",value:function(){this.input.value=""}}]),e}();t.default=i},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(26);var i=function(){function e(t){var n=t.container;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=n,this._createBox()}return r(e,[{key:"_createElement",value:function(e){var t=document.createElement("div");return t.className=e,t}},{key:"_createBox",value:function(){this.root=this._createElement("srm-layout"),this.searchBox=this._createElement("srm-layout__search-box"),this.history=this._createElement("srm-layout__history"),this.map=this._createElement("srm-layout__map"),this.root.appendChild(this.searchBox),this.root.appendChild(this.history),this.root.appendChild(this.map),this.container.appendChild(this.root)}},{key:"getSearchBoxContainer",value:function(){return this.searchBox}},{key:"getHistoryContainer",value:function(){return this.history}},{key:"getMapContainer",value:function(){return this.map}},{key:"scrollToTop",value:function(){this.history.scrollTop=0}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new Map;t.publish=function(e,t){r.has(e)&&r.get(e).forEach(function(e){return function(e,t){try{t(e)}catch(e){console.log(e)}}(t,e)})},t.subscribe=function(e,t){r.has(e)||r.set(e,new Set),r.get(e).add(t)},t.unsubscribe=function(e,t){if(r.has(e)){var n=r.get(e);n.delete(t),0===n.size&&r.delete(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(28));var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{eventEmitter:i};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.eventEmitter;this.place={},this.history=[],this.activePlaceOnHistory=null,this.eventEmitter=n}return r(e,[{key:"getHistory",value:function(){return this.history}},{key:"getPlace",value:function(){return this.place}},{key:"_collectPlaceObj",value:function(e){if(e.id)return e;var t=""+(new Date).getTime();return Object.assign({},e,{id:t})}},{key:"setPlace",value:function(e){if(e){var t=this._collectPlaceObj(e);this.place.id!==t.id&&(this.place=t,this.publish("onPlaceChange",this.place))}}},{key:"setHistory",value:function(e){if(e){this.history=e;var t=this.history.find(function(e){return e.active});t&&this.setPlaceActiveInHistory(t),this.publish("onHistoryChange",this.history)}}},{key:"setPlaceActiveInHistory",value:function(e){this.activePlaceOnHistory&&(this.activePlaceOnHistory.active=!1),this.activePlaceOnHistory=e,this.activePlaceOnHistory.active=!0}},{key:"makeCurrentPlaceHistory",value:function(){this.history.unshift(this.place),this.setPlaceActiveInHistory(this.place),this.publish("onHistoryChange",this.history),this.publish("onMakeCurrentPlaceHistory")}},{key:"selectHistoryPlace",value:function(e){if(this.history.length){var t=this.history.find(function(t){return t.id===e});t&&(this.setPlace(t),this.setPlaceActiveInHistory(t),this.publish("onHistoryChange",this.history))}}},{key:"subscribe",value:function(e,t){this.eventEmitter.subscribe(this._getEventName(e),t)}},{key:"unSubscribe",value:function(e,t){this.eventEmitter.unsubscribe(this._getEventName(e),t)}},{key:"publish",value:function(e,t){this.eventEmitter.publish(this._getEventName(e),t)}},{key:"_getEventName",value:function(e){return e?"SRM-Model-"+e:"SRM-Model"}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(29)),i=l(n(27)),a=l(n(24)),o=l(n(19)),s=l(n(16)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),u=l(n(0));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.container,n=new r.default,l=new i.default({container:t});new a.default({container:l.getSearchBoxContainer(),onPlaceChange:function(e){n.setPlace(e),n.makeCurrentPlaceHistory()}});var f=new o.default({container:l.getMapContainer()}),h=new s.default({container:l.getHistoryContainer(),onCardClick:function(e){return n.selectHistoryPlace(e)}});n.subscribe("onPlaceChange",function(e){return f.addMarker(e)}),n.subscribe("onHistoryChange",function(e){return h.render(e)}),n.subscribe("onMakeCurrentPlaceHistory",function(){return l.scrollToTop()}),function(e){var t=c.load("SRMModel"),n=t.place,r=void 0===n?{}:n,i=t.history,a=void 0===i?[]:i;e.setPlace(r),e.setHistory(a)}(n),function(e){window.addEventListener("beforeunload",function(){c.save({data:{place:e.getPlace(),history:e.getHistory()},key:"SRMModel"})})}(n),function(e,t){var n=t.getPlace();n&&n.location||(0,u.default)(function(n){t.getPlace().location||e.setCenter(n)})}(f,n)}},function(e,t,n){e.exports=n.p+"favicon.png"},function(e,t,n){"use strict";n(31)},,function(e,t,n){},function(e,t,n){"use strict";n(34),n(32);var r,i=n(30),a=(r=i)&&r.__esModule?r:{default:r};window.srm=function(){return(0,a.default)({container:document.getElementById("srm-app")})}}]);